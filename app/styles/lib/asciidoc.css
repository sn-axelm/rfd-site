/*
 * This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, you can obtain one at https://mozilla.org/MPL/2.0/.
 *
 * Copyright Oxide Computer Company
 */

@utility asciidoc-body {
  /* Removes top spacing from header if it is the first element */
  & #content > .sect1:first-of-type > h1:nth-child(2) {
    @apply mt-0;
  }
  & #content > .sect1:first-of-type > h2:nth-child(2) {
    @apply mt-0;
  }
  & #content > .sect1:first-of-type > h3:nth-child(2) {
    @apply mt-0;
  }
  & #content > .sect1:first-of-type > h4:nth-child(2) {
    @apply mt-0;
  }
  & #content > .sect1:first-of-type > h5:nth-child(2) {
    @apply mt-0;
  }

  & h2[data-sectnum] a {
    @apply inline;
  }

  & h1[data-sectnum] a {
    @apply inline;
  }

  & h3[data-sectnum] a {
    @apply inline;
  }

  & h4[data-sectnum] a {
    @apply inline;
  }

  & h5[data-sectnum] a {
    @apply inline;
  }

  & h1[data-sectnum]:before {
    @apply text-tertiary 800:absolute 800:-left-[72px] 800:mr-0 800:w-[60px] 800:text-right 800:text-sans-lg pointer-events-none top-[6px] mr-2 inline-block;
    content: attr(data-sectnum);
  }

  & h2[data-sectnum]:before {
    @apply text-tertiary 800:absolute 800:-left-[72px] 800:mr-0 800:w-[60px] 800:text-right 800:text-sans-lg pointer-events-none top-[6px] mr-2 inline-block;
    content: attr(data-sectnum);
  }

  & h3[data-sectnum]:before {
    @apply text-tertiary 800:absolute 800:-left-[72px] 800:mr-0 800:w-[60px] 800:text-right 800:text-sans-lg pointer-events-none top-[6px] mr-2 inline-block;
    content: attr(data-sectnum);
  }

  & h4[data-sectnum]:before {
    @apply text-tertiary 800:absolute 800:-left-[72px] 800:mr-0 800:w-[60px] 800:text-right 800:text-sans-lg pointer-events-none top-[6px] mr-2 inline-block;
    content: attr(data-sectnum);
  }

  & h5[data-sectnum]:before {
    @apply text-tertiary 800:absolute 800:-left-[72px] 800:mr-0 800:w-[60px] 800:text-right 800:text-sans-lg pointer-events-none top-[6px] mr-2 inline-block;
    content: attr(data-sectnum);
  }

  & h3[data-sectnum]:before {
    @apply top-[2px];
  }

  & h4[data-sectnum]:before {
    @apply top-0;
  }

  & h5[data-sectnum]:before {
    @apply top-0;
  }

  & h1[data-sectnum] a:after {
    @apply hidden;
  }

  & h2[data-sectnum] a:after {
    @apply hidden;
  }

  & h3[data-sectnum] a:after {
    @apply hidden;
  }

  & h4[data-sectnum] a:after {
    @apply hidden;
  }

  & h5[data-sectnum] a:after {
    @apply hidden;
  }

  & .table-wrapper caption a:hover:after {
    @apply align-[-2px];
  }

  & img {
    @apply bg-inverse-primary;
  }

  & .transparent-dark img {
    @apply bg-raise;
  }

  & span img {
    @apply bg-transparent;
  }

  & .admonition-content > div:first-of-type {
    @apply text-sans-semi-md;
  }

  & pre .conum[data-value] {
    @apply text-accent bg-accent-secondary-hover;
  }

  & svg p {
    font-size: initial;
    letter-spacing: initial;
    font-weight: initial;
  }
}

@utility sect1 {
  /* Removes top spacing from header if it is the first element */
  .asciidoc-body #content > &:first-of-type > h1:nth-child(2) {
    @apply mt-0;
  }

  .asciidoc-body #content > &:first-of-type > h2:nth-child(2) {
    @apply mt-0;
  }

  .asciidoc-body #content > &:first-of-type > h3:nth-child(2) {
    @apply mt-0;
  }

  .asciidoc-body #content > &:first-of-type > h4:nth-child(2) {
    @apply mt-0;
  }

  .asciidoc-body #content > &:first-of-type > h5:nth-child(2) {
    @apply mt-0;
  }
}

@utility table-wrapper {
  .asciidoc-body & caption a:hover:after {
    @apply align-[-2px];
  }
}

@utility transparent-dark {
  .asciidoc-body & img {
    @apply bg-raise;
  }
}

@utility admonition-content {
  .asciidoc-body & > div:first-of-type {
    @apply text-sans-semi-md;
  }
}

@utility conum {
  .asciidoc-body pre &[data-value] {
    @apply text-accent bg-accent-secondary-hover;
  }
}
